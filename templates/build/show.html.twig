{% extends 'base.html.twig' %}

{% block title %}{{ build.title }}{% endblock %}
 
{% block body %}
{# {{dump(app.user)}} #}
<div class="container">
    <h1>{{ build.title }}</h1>
    <p style="color: red">categorie : {{ build.categories[0].name }}</p>

    <p style="color: red">Killer : {{ build.killers[0].name }}</p>
    
    <p>{{ build.content|raw }}</p>
    <img src="{{ asset('build.image') }}" alt="image">
    {{ build.image }}
    {# retour section #}
    <div>
        <a href="{{ path('allbuild') }}">Retour aux Builds</a>
    </div>
    {# Remove section #}
    <div>
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('build_edit', {'id': build.id}) }}">Modifier</a>
            <a href="{{ path('removebuild', {'id': build.id}) }}">Supprimer</a>
        {% endif %}
    </div>

    <h3 class="comment-title mt-5">
        <span id='comment-count'>
            {{ build.comments|length }} avis actuellement
           
        </span>
    </h3>
    <hr>
    <div class="comment-area mb-5">
        {{ form(commentForm, { 'attr': {'class': 'comment-form'} }) }}
    </div>

    {% if comments is not empty %}
        <div>
            {% for comment in comments %}
                <h4>{{ comment.getUser().getUsername() }}</h4>
                <p>{{ comment.content }}</p>
                <p>{{ comment.createdAt|date("{m/d/Y}") }}</p>
                <hr>
                
            {% endfor %}
        </div>
        {% else %}
            <p class="fst-italic text-center">Soyez le premier a déclencher un débat pour rien</p>
    {% endif %}
    
</div>

{% endblock %}
